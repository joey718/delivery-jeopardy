<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Jeopardy</title>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0066ff;
            --secondary: #ff3366;
            --gold: #ffd700;
            --dark: #0a0e27;
            --light: #f0f4ff;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            background: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            min-height: 100vh;
        }
        
        body {
            font-family: 'Fredoka', sans-serif;
            background: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            animation: slideDown 0.8s ease;
        }
        
        h1 {
            font-family: 'Righteous', cursive;
            font-size: 4rem;
            color: var(--gold);
            text-shadow: 4px 4px 0 var(--dark), 
                         8px 8px 0 rgba(0, 0, 0, 0.2);
            letter-spacing: 3px;
            margin-bottom: 10px;
        }
        
        .scores {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 30px;
            animation: slideUp 0.8s ease 0.2s both;
        }
        
        .team {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            min-width: 400px;
        }
        
        .team:hover {
            transform: translateY(-5px);
        }
        
        .team.team1 {
            border-color: var(--primary);
        }
        
        .team.team2 {
            border-color: var(--secondary);
        }
        
        .team.team2 .team-name,
        .team.team2 .score {
            text-align: right;
        }
        
        .team-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .team1 .team-name {
            color: var(--primary);
        }
        
        .team2 .team-name {
            color: var(--secondary);
        }
        
        .score {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--gold);
            text-shadow: 2px 2px 0 var(--dark);
            margin-bottom: 15px;
        }
        
        .student-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.9);
            font-family: 'Fredoka', sans-serif;
            font-size: 1rem;
            resize: vertical;
            min-height: 80px;
        }
        
        .student-input::placeholder {
            color: #999;
        }
        
        .random-picker-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .random-btn {
            width: 100%;
            margin-bottom: 10px;
        }
        
        .selected-student {
            font-size: 1.2rem;
            color: var(--gold);
            font-weight: 600;
            min-height: 30px;
            text-align: center;
            padding: 5px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .judges-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 40px;
            border: 3px solid var(--gold);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .judges-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .judges-list {
            font-size: 1.2rem;
            color: white;
            min-height: 30px;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        button {
            font-family: 'Fredoka', sans-serif;
            font-weight: 600;
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary {
            background: var(--gold);
            color: var(--dark);
        }
        
        .btn-primary:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-bottom: 30px;
            animation: fadeIn 1s ease 0.4s both;
        }
        
        .category {
            background: var(--dark);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 2px;
            border: 3px solid var(--gold);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }
        
        .cell {
            background: linear-gradient(135deg, var(--primary) 0%, #0052cc 100%);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--gold);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .cell::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }
        
        .cell:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .cell:hover {
            transform: scale(1.05);
            border-color: var(--gold);
            box-shadow: 0 12px 30px rgba(255, 215, 0, 0.4);
        }
        
        .cell.used {
            background: rgba(0, 0, 0, 0.3);
            cursor: not-allowed;
            color: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .cell.used:hover {
            transform: none;
            box-shadow: none;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 30px;
            padding: 40px;
            max-width: 95vw;
            width: 95vw;
            max-height: 95vh;
            border: 5px solid var(--gold);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: zoomIn 0.4s ease;
            display: flex;
            flex-direction: column;
        }
        
        .modal-header {
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
        }
        
        .modal-prompt {
            font-size: 3rem;
            line-height: 1.5;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 15px;
            border-left: 5px solid var(--gold);
            flex: 1;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .modal-directions {
            font-size: 2rem;
            line-height: 1.5;
            color: var(--light);
            margin-bottom: 30px;
            font-style: italic;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .settings-modal .modal-content {
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .category-selector {
            margin-bottom: 30px;
        }
        
        .category-option {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .category-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .category-option input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .category-option label {
            cursor: pointer;
            font-size: 1.2rem;
            flex: 1;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        @media (max-width: 1200px) {
            h1 {
                font-size: 3rem;
            }
            
            .board {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .cell {
                font-size: 2rem;
                padding: 20px;
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .scores {
                flex-direction: column;
                gap: 20px;
            }
            
            .team {
                min-width: auto;
                padding: 15px 20px;
            }
            
            .board {
                gap: 10px;
            }
            
            .cell {
                font-size: 1.5rem;
                padding: 15px;
            }
            
            .category {
                font-size: 1.2rem;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .modal-prompt {
                font-size: 2rem;
                padding: 25px;
            }
            
            .modal-directions {
                font-size: 1.5rem;
                padding: 20px;
            }
            
            .modal-header {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; min-height: 100vh;">
    <script>
        // Force background immediately
        document.documentElement.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
    </script>
    <div class="container">
        <header>
            <h1>DELIVERY JEOPARDY!</h1>
        </header>
        
        <div class="scores">
            <div class="team team1">
                <div class="team-name">Team 1</div>
                <div class="score" id="score1">$0</div>
                <textarea class="student-input" id="team1Students" placeholder="Enter student names, one per line"></textarea>
                <div class="random-picker-section">
                    <button class="btn-secondary random-btn" onclick="pickRandomStudent(1)">Pick Random Student</button>
                    <div class="selected-student" id="selectedStudent1"></div>
                </div>
            </div>
            <div class="team team2">
                <div class="team-name">Team 2</div>
                <div class="score" id="score2">$0</div>
                <textarea class="student-input" id="team2Students" placeholder="Enter student names, one per line"></textarea>
                <div class="random-picker-section">
                    <button class="btn-secondary random-btn" onclick="pickRandomStudent(2)">Pick Random Student</button>
                    <div class="selected-student" id="selectedStudent2"></div>
                </div>
            </div>
        </div>
        
        <div class="judges-section">
            <div class="judges-title">Judges</div>
            <div class="judges-list" id="judgesList"></div>
            <button class="btn-primary" onclick="selectJudges()">Select 2 Judges (1 from each team)</button>
        </div>
        
        <div class="controls">
            <button class="btn-primary" onclick="resetGame()">Reset Game</button>
            <button class="btn-secondary" onclick="openSettings()">Change Categories</button>
        </div>
        
        <div class="board" id="board"></div>
    </div>
    
    <div class="modal" id="promptModal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle"></div>
            <div class="modal-prompt" id="modalPrompt"></div>
            <div class="modal-directions" id="modalDirections"></div>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="awardPoints(1)">Points for Team 1</button>
                <button class="btn-primary" onclick="awardPoints(2)">Points for Team 2</button>
                <button class="btn-secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>
    
    <div class="modal settings-modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">Select Categories (Choose 5)</div>
            <div class="category-selector" id="categorySelector"></div>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="applyCategories()">Apply</button>
                <button class="btn-secondary" onclick="closeSettings()">Cancel</button>
            </div>
        </div>
    </div>


    <script>
        // Hardcoded data from Google Sheet
        const allCategories = {
                "MOVIES & TV": [
                    { prompt: "The Fresh Prince of Bel-Air — Will confronts his father", directions: "Type: Monologue\nTone: Hurt → anger → resignation\n\nYou say you're proud of me. But you're not here. You say you wanted to be, but wanting doesn't fix anything.\n\nI learned how to shave by myself. I learned how to be tough by myself. I learned how to stop expecting you by myself.\n\nAnd everyone keeps telling me I should be grateful you showed up now— but I already learned how to live without you.\n\nSo tell me this: if I wasn't enough then, why should I believe I'm enough now?" },
                    { prompt: "Black Panther — Killmonger explains his worldview", directions: "Type: Monologue\nTone: Controlled anger, moral certainty\n\nYou had power this whole time. Knowledge. Technology. Safety. And you hid it.\n\nWhile people who looked like me were taught to survive with nothing.\n\nYou say peace matters. But peace that only protects *you* isn't peace — it's comfort.\n\nI'm not asking you to feel guilty. I'm asking you to stop pretending neutrality is kindness.\n\nBecause doing nothing is still a choice." },
                    { prompt: "Wednesday — Wednesday on emotions", directions: "Type: Monologue\nTone: Dry, ironic, controlled\n\nPeople think emotions make them deep. I think emotions make people loud.\n\nWhen you feel everything all the time, you stop thinking clearly.\n\nI prefer precision. Facts. Control.\n\nThat doesn't mean I feel nothing. It means I don't let feelings decide for me.\n\nIf that makes me strange, I'm fine with strange." },
                    { prompt: "Spider-Man: No Way Home — Peter explains his mistake", directions: "Type: Monologue\nTone: Overwhelmed, sincere\n\nI didn't mean to break anything. I just wanted things to go back to normal.\n\nEveryone keeps saying I should be careful with power— but no one tells you what to do when every option hurts someone.\n\nI wasn't trying to be a hero. I was trying to help my friends.\n\nAnd now everything's worse.\n\nSo if this is my fault, tell me how I'm supposed to live with that." },
                    { prompt: "Stranger Things — Feeling like a monster", directions: "Type: Monologue\nTone: Vulnerable, quiet\n\nPeople say I'm special. But they only say that when something goes wrong.\n\nWhen things are calm, they look at me like I don't belong.\n\nI didn't ask to be different. I didn't ask to be afraid all the time.\n\nI just want to know— if I stop being useful, do I still matter?" },
                    { prompt: "Mean Girls — Realizing the social system", directions: "Type: Monologue\nTone: Fast, self-aware\n\nI thought popularity was about being liked. Turns out it's about control.\n\nEveryone's watching everyone else, pretending not to care, while caring too much.\n\nAnd the worst part? You don't notice you're becoming cruel until it feels normal.\n\nI didn't mean to hurt anyone. I just wanted to belong.\n\nAnd somehow, that made everything worse." },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" }
                ],
                "INSPIRATIONAL": [
                    { prompt: "Excessively Cheerful", directions: "\"Good morning, friends! Isn't democracy just amazing? Today, we gather to support voting reform. So, let's put our hands together and make history, hooray! Just imagine a future where everyone has a say, everyone counts equally, and voting is accessible and easy! Let's make that happen. Turn to your neighbor, smile, high-five, and let's get energized to protect democracy, champion voter rights, and build a brighter future, together, yay!\"" },
                    { prompt: "Quietly Intense Whisper", directions: "\"They think they can silence us. But our whispers together become a roar. Today, we change everything. It's not through shouting louder, but through the quiet resolve we hold within us. Each whispered word of truth builds until it can no longer be ignored. So lean in, listen closely, and speak softly—but speak with courage. For in these hushed tones, we find our strength, our unity, and ultimately, our victory.\"" },
                    { prompt: "States Finals Pep Talk", directions: "\"Great moments are born from great opportunity. That's what you have here tonight. That's what you've earned here tonight. One speech. If we debated them ten times, they might win nine. But not this speech. Not tonight. Tonight, we speak confidently, clearly, and passionately. Tonight, we show them what we're made of. Because tonight, we are the greatest debaters in the world.\"" },
                    { prompt: "Passionate Appeal", directions: "\"This is our moment! The eyes of the future are looking back at us, pleading that we act now. We can't wait another day, another hour, another minute. Let's channel our passion, our anger, our hope into action. Together, we will shape the world we deserve!\"" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" }
                ],
                "APOLOGIES": [
                    { prompt: "Fake Apology", directions: "\"I'm deeply sorry if anyone took offense to my clearly misunderstood comments. It's unfortunate you felt that way, honestly. My intention was obviously not to upset anyone, but I guess not everyone appreciates my sense of humor. So, let's just move on, shall we? Clearly, this was blown out of proportion, but I'm big enough to say sorry—so, you know, sorry.\"" },
                    { prompt: "Politician's Non-Apology", directions: "\"Mistakes were made, and moving forward, we will learn from these mistakes and become stronger—together. While it's not useful to dwell on the specifics of who did what, it is important that we commit ourselves to improvement. The past is the past, and I pledge today that we will focus on the future, unified and resolved, ensuring this never occurs again. Thank you.\"" },
                    { prompt: "Genuine and Humble", directions: "\"I made a mistake, and I own it completely. You deserve better from me, and I promise to earn your trust again. I understand that actions speak louder than words, so starting today, I will take clear, concrete steps to make amends. Your forgiveness isn't something I take lightly, and I will work tirelessly to prove myself worthy of it once again. Thank you for giving me the opportunity to make things right.\"" },
                    { prompt: "Corporate Apology", directions: "\"We deeply regret the recent incident and any inconvenience caused. At our company, we strive for excellence, and clearly, we fell short. We're conducting a thorough review to prevent such incidents in the future. Thank you for your patience and understanding.\"" },
                    { prompt: "Dramatic Celebrity Apology", directions: "\"I come before you humbled and ashamed. Fame doesn't excuse my actions. I've let down my fans, my family, and myself. I'm committed to personal growth and will use this painful lesson to better myself. Thank you for believing in second chances.\"" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" }
                ],
                "GENERIC CONGRESS SPEECHES": [
                    { prompt: "Passionate Advocacy", directions: "\"Today, colleagues, is the day we act decisively. Our communities demand action on climate change. Ignoring science won't make the storms go away, and silence won't protect future generations. Join me today in voting yes—because our children deserve a livable planet.\"" },
                    { prompt: "Sarcastic Enthusiasm", directions: "\"Oh sure, senators, let's definitely approve a bill that wastes taxpayer dollars. Because who wouldn't love throwing away millions to fix problems that don't even exist? Let's just forget about healthcare, education, infrastructure, and all those other trivial things. Clearly, we should prioritize the imaginary crises. Seriously, colleagues, let's inject some common sense back into this chamber and reject this nonsensical bill.\"" },
                    { prompt: "Inspiring Patriotism", directions: "\"Today, colleagues, we vote not just on policy, but on the values that built this nation—justice, fairness, and opportunity for all. Vote yes, and stand proudly for what America truly represents. Our constituents are watching us closely, looking for hope and integrity in their leaders. Let's show them what true leadership is: making decisions rooted in our nation's foundational principles and the promise of a brighter future for every American.\"" },
                    { prompt: "Dramatic Opposition", directions: "\"This legislation is a wolf in sheep's clothing—promising solutions while delivering nothing but false hope. It burdens taxpayers without solving the root issues. Colleagues, I urge you to see through this facade and vote no.\"" },
                    { prompt: "Hopeful Future Vision", directions: "\"Imagine a nation where healthcare is not a privilege, but a universal right; where no family fears bankruptcy from medical bills. This bill moves us toward that vision—one of equity, dignity, and compassion. Let's make history today.\"" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" }
                ],
                "TOASTS": [
                    { prompt: "Heartfelt Gratitude", directions: "\"To Coach Carter, whose tireless dedication and patience shaped not just our debating skills but our lives. You've believed in us even when we didn't believe in ourselves, and we are forever grateful.\"" },
                    { prompt: "Humorous Roast", directions: "\"Here's to our captain, Sam—the only person who can debate themselves and still lose. Seriously, Sam, we appreciate your unique talent for turning every simple argument into a three-hour ordeal. Cheers!\"" },
                    { prompt: "Over-the-Top Praise", directions: "\"I raise this glass to Jamie—the greatest debate captain, smartest student, and undeniably most talented person who ever walked these halls. Truly, an inspiration to humanity. Jamie's brilliance, grace under pressure, and unmatched eloquence have forever set an impossible standard for the rest of us mere mortals. Jamie, thank you for your greatness, your wit, your charm, and your unfailing ability to win. Cheers to Jamie, who frankly, deserves statues built in their honor.\"" },
                    { prompt: "Bitter Rivalry Masked as Friendship", directions: "\"A toast to Alex—someone who always kept me motivated... motivated to stay ahead, because second place just isn't my style. Seriously though, congrats on finally catching up. You've been a worthy rival, I mean, friend, throughout these years. I look forward to many more battles—I mean, friendly competitions—in the future. Here's to Alex, a constant reminder of how important it is to never settle for second best. Cheers!\"" },
                    { prompt: "Inspirational", directions: "\"Tonight, we celebrate not just victories but every defeat that taught us resilience. Here's to a future filled with challenges we'll conquer together, stronger each time.\"" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" },
                    { prompt: "", directions: "" }
                ],
                "SCRIMMAGE SPEECHES": [
                    { prompt: "Bodega sandwiches are better than deli sandwiches.", directions: "Defend this position" },
                    { prompt: "Cats make better pets than dogs.", directions: "Defend this position" },
                    { prompt: "Artificial intelligence does more harm than good.", directions: "Defend this position" },
                    { prompt: "Humans are fundamentally good.", directions: "Defend this position" },
                    { prompt: "The US should ban assault weapons.", directions: "Defend this position" },
                    { prompt: "High school relationships are worth the time and energy.", directions: "Defend this position" },
                    { prompt: "AI will replace most human jobs by 2050.", directions: "Defend this position" },
                    { prompt: "NYC should make buses free for all.", directions: "Defend this position" },
                    { prompt: "The 7 train is the best subway line.", directions: "Defend this position" },
                    { prompt: "Books are better than movies.", directions: "Defend this position" }
                ],
                "IRL POLITICIANS": [
                    { prompt: "Social media should be regulated by the government.", directions: "Defend this position" },
                    { prompt: "Individuals have a moral obligation to help others.", directions: "Defend this position" },
                    { prompt: "Gun ownership should require annual licensing and safety training.", directions: "Defend this position" },
                    { prompt: "Dating apps should require parental permission for minors.", directions: "Defend this position" },
                    { prompt: "Autonomous vehicles will completely replace human-driven cars within 20 years.", directions: "Defend this position" },
                    { prompt: "NYC should expand the NYC Ferry system to all boroughs.", directions: "Defend this position" },
                    { prompt: "Dollar slice pizza is overrated.", directions: "Defend this position" },
                    { prompt: "Summer is better than winter.", directions: "Defend this position" },
                    { prompt: "The voting age should be lowered to 16.", directions: "Defend this position" },
                    { prompt: "Happiness is more important than success.", directions: "Defend this position" }
                ]
        };
        
        let gameState = {
            team1Score: 0,
            team2Score: 0,
            usedCells: new Set(),
            currentCell: null,
            selectedCategories: [],
            version: "2.0", // Version to track data structure changes
            team1Students: [],
            team2Students: [],
            judges: []
        };
        
        const moneyValues = [100, 200, 300, 400, 500, 600, 700, 800, 900, 1000];
        
        // Get student lists from textareas
        function getStudentList(teamNumber) {
            const textarea = document.getElementById(`team${teamNumber}Students`);
            return textarea.value.split('\n')
                .map(name => name.trim())
                .filter(name => name.length > 0);
        }
        
        // Pick a random student (without removing from list)
        function pickRandomStudent(teamNumber) {
            const students = getStudentList(teamNumber);
            
            if (students.length === 0) {
                document.getElementById(`selectedStudent${teamNumber}`).textContent = 'No students entered';
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * students.length);
            const selectedStudent = students[randomIndex];
            document.getElementById(`selectedStudent${teamNumber}`).textContent = selectedStudent;
        }
        
        // Select judges (one from each team, removing them from the lists)
        function selectJudges() {
            const team1Students = getStudentList(1);
            const team2Students = getStudentList(2);
            
            if (team1Students.length === 0 || team2Students.length === 0) {
                alert('Please enter students for both teams before selecting judges.');
                return;
            }
            
            // Pick random students
            const judge1Index = Math.floor(Math.random() * team1Students.length);
            const judge2Index = Math.floor(Math.random() * team2Students.length);
            
            const judge1 = team1Students[judge1Index];
            const judge2 = team2Students[judge2Index];
            
            // Remove judges from the student lists
            team1Students.splice(judge1Index, 1);
            team2Students.splice(judge2Index, 1);
            
            // Update textareas with judges removed
            document.getElementById('team1Students').value = team1Students.join('\n');
            document.getElementById('team2Students').value = team2Students.join('\n');
            
            // Add to judges list
            gameState.judges.push(judge1, judge2);
            updateJudgesList();
            
            // Clear selected students
            document.getElementById('selectedStudent1').textContent = '';
            document.getElementById('selectedStudent2').textContent = '';
        }
        
        // Update the judges display
        function updateJudgesList() {
            const judgesList = document.getElementById('judgesList');
            if (gameState.judges.length === 0) {
                judgesList.textContent = 'No judges selected yet';
            } else {
                judgesList.textContent = gameState.judges.join(', ');
            }
        }
        
        // Initialize with first 5 categories (columns B-F from the sheet)
        function initializeDefaultCategories() {
            gameState.selectedCategories = ["MOVIES & TV", "INSPIRATIONAL", "APOLOGIES", "GENERIC CONGRESS SPEECHES", "TOASTS"];
            localStorage.setItem('selectedCategories', JSON.stringify(gameState.selectedCategories));
            localStorage.setItem('gameVersion', '2.0');
        }
        
        // Load saved categories or use defaults
        function loadCategories() {
            const savedVersion = localStorage.getItem('gameVersion');
            const saved = localStorage.getItem('selectedCategories');
            
            // If version mismatch or no saved data, reset to defaults
            if (savedVersion !== '2.0' || !saved) {
                console.log('Initializing with default categories');
                initializeDefaultCategories();
                return;
            }
            
            try {
                const parsed = JSON.parse(saved);
                // Validate that all categories exist in our data
                const allValid = parsed.every(cat => allCategories.hasOwnProperty(cat));
                if (allValid && parsed.length === 5) {
                    gameState.selectedCategories = parsed;
                } else {
                    console.log('Invalid categories found, resetting to defaults');
                    initializeDefaultCategories();
                }
            } catch (e) {
                console.log('Error parsing saved categories, resetting to defaults');
                initializeDefaultCategories();
            }
        }
        
        function renderBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            // Add category headers
            gameState.selectedCategories.forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';
                categoryDiv.textContent = category;
                board.appendChild(categoryDiv);
            });
            
            // Add cells for each value
            for (let i = 0; i < 10; i++) {
                gameState.selectedCategories.forEach((category, catIndex) => {
                    const cell = document.createElement('div');
                    const cellId = `${catIndex}-${i}`;
                    cell.className = 'cell';
                    cell.id = cellId;
                    cell.textContent = `$${moneyValues[i]}`;
                    
                    if (gameState.usedCells.has(cellId)) {
                        cell.classList.add('used');
                    } else {
                        cell.onclick = () => openPrompt(catIndex, i, cellId);
                    }
                    
                    board.appendChild(cell);
                });
            }
        }
        
        function openPrompt(categoryIndex, promptIndex, cellId) {
            const category = gameState.selectedCategories[categoryIndex];
            const promptData = allCategories[category][promptIndex];
            
            // Skip empty cells
            if (!promptData.prompt && !promptData.directions) {
                return;
            }
            
            gameState.currentCell = {
                id: cellId,
                value: moneyValues[promptIndex]
            };
            
            document.getElementById('modalTitle').textContent = `${category} - $${moneyValues[promptIndex]}`;
            
            // For categories with separate prompt and directions
            if (promptData.prompt) {
                document.getElementById('modalPrompt').textContent = promptData.prompt;
                document.getElementById('modalDirections').textContent = promptData.directions;
                document.getElementById('modalDirections').style.display = 'block';
            } else {
                // For categories where everything is in directions
                document.getElementById('modalPrompt').textContent = promptData.directions;
                document.getElementById('modalDirections').style.display = 'none';
            }
            
            document.getElementById('promptModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('promptModal').style.display = 'none';
            if (gameState.currentCell) {
                gameState.usedCells.add(gameState.currentCell.id);
                document.getElementById(gameState.currentCell.id).classList.add('used');
                gameState.currentCell = null;
                saveGameState();
            }
        }
        
        function awardPoints(team) {
            if (!gameState.currentCell) return;
            
            if (team === 1) {
                gameState.team1Score += gameState.currentCell.value;
                document.getElementById('score1').textContent = `$${gameState.team1Score}`;
            } else {
                gameState.team2Score += gameState.currentCell.value;
                document.getElementById('score2').textContent = `$${gameState.team2Score}`;
            }
            
            closeModal();
        }
        
        function resetGame() {
            if (confirm('Are you sure you want to reset the game? All scores will be lost.')) {
                gameState.team1Score = 0;
                gameState.team2Score = 0;
                gameState.usedCells.clear();
                gameState.currentCell = null;
                
                document.getElementById('score1').textContent = '$0';
                document.getElementById('score2').textContent = '$0';
                
                saveGameState();
                renderBoard();
            }
        }
        
        function openSettings() {
            const selector = document.getElementById('categorySelector');
            selector.innerHTML = '';
            
            Object.keys(allCategories).forEach(category => {
                const option = document.createElement('div');
                option.className = 'category-option';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `cat-${category}`;
                checkbox.checked = gameState.selectedCategories.includes(category);
                
                const label = document.createElement('label');
                label.htmlFor = `cat-${category}`;
                label.textContent = category;
                
                option.appendChild(checkbox);
                option.appendChild(label);
                option.onclick = (e) => {
                    if (e.target !== checkbox) {
                        checkbox.checked = !checkbox.checked;
                    }
                };
                
                selector.appendChild(option);
            });
            
            document.getElementById('settingsModal').style.display = 'block';
        }
        
        function closeSettings() {
            document.getElementById('settingsModal').style.display = 'none';
        }
        
        function applyCategories() {
            const checkboxes = document.querySelectorAll('#categorySelector input[type="checkbox"]');
            const selected = [];
            
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    const category = cb.id.replace('cat-', '');
                    selected.push(category);
                }
            });
            
            if (selected.length !== 5) {
                alert('Please select exactly 5 categories.');
                return;
            }
            
            gameState.selectedCategories = selected;
            localStorage.setItem('selectedCategories', JSON.stringify(selected));
            localStorage.setItem('gameVersion', '2.0');
            
            // Reset game with new categories
            gameState.team1Score = 0;
            gameState.team2Score = 0;
            gameState.usedCells.clear();
            gameState.currentCell = null;
            
            document.getElementById('score1').textContent = '$0';
            document.getElementById('score2').textContent = '$0';
            
            saveGameState();
            renderBoard();
            closeSettings();
        }
        
        function saveGameState() {
            localStorage.setItem('gameState', JSON.stringify({
                team1Score: gameState.team1Score,
                team2Score: gameState.team2Score,
                usedCells: Array.from(gameState.usedCells)
            }));
        }
        
        function loadGameState() {
            const saved = localStorage.getItem('gameState');
            if (saved) {
                const state = JSON.parse(saved);
                gameState.team1Score = state.team1Score;
                gameState.team2Score = state.team2Score;
                gameState.usedCells = new Set(state.usedCells);
                
                document.getElementById('score1').textContent = `$${gameState.team1Score}`;
                document.getElementById('score2').textContent = `$${gameState.team2Score}`;
            }
        }
        
        // Initialize game directly
        loadCategories();
        loadGameState();
        renderBoard();
        updateJudgesList();
        
        // Close modals when clicking outside
        window.onclick = function(event) {
            const promptModal = document.getElementById('promptModal');
            const settingsModal = document.getElementById('settingsModal');
            if (event.target === promptModal) {
                closeModal();
            } else if (event.target === settingsModal) {
                closeSettings();
            }
        }
    </script>
</body>
</html>